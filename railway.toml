[build]
# Use Nixpacks Python builder and explicitly install backend dependencies
builder = "nixpacks"
buildCommand = "cd api && pip install -r requirements.txt"

[deploy]
# Removed preDeploy migrations (Base.metadata.create_all covers initial table creation). Re-add later if full Alembic needed.
startCommand = "sh -c 'cd api && uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000}'"
healthcheckPath = "/healthz"
healthcheckTimeout = 100
restartPolicyType = "never"